<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link rel="stylesheet" href="style_form.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <title>To Do List</title>
</head>

<body>
  <header>

    <% if (task == null) { %>
    <form class="row g-3" action="/create" method="post">
        
      <div class="col-auto">
        <label for="tarefa" class="visually-hidden">Tarefa</label>
        <input type="text" name="task" class="form-control" id="tarefa" placeholder="Tarefa">
      </div>
      <div class="col-auto">
        <button type="submit" name="adicionar" id="adicionar" class="btn btn-primary mb-3">Inserir Tarefa</button>
      </div>
    </form>
    <% } else { %>
    <form class="row g-3" action="/update/<%= task._id %>" method="post">
        
      <div class="col-auto">
        
        <input type="text" name="task" class="form-control" id="tarefa" value="<%= task.task%>">
      </div>
      <div class="col-auto">
        <button type="submit" name="adicionar" id="adicionar" class="btn btn-primary mb-3">Alterar Tarefa</button>
      </div>
    </form>
 <% }%>

  </header>
   
  <section id="tasks">
    <ul>
      <% tasklist.forEach((task)=> { %>
          <li> 
            <%= task.task %> | <%= task.date.toLocaleDateString('pt-br') %> 
            <a href="/getById/<%= task._id %>/update"><i class="bi bi-pencil-square"></i></a>
            <a href="/getById/<%= task._id %>/delete"><i class="bi bi-trash-fill"></i></a>
            
          </li>
      <% }); %>
    </ul>
  </section>
  <% if (taskDelete != null) { %>
  <section id="modal">
    <div id="card">
      <a href="/">x</a>
      <h2>Confirmação</h2>
      <hr>
      <p>Deseja realmente apagar a tarefa: <%= taskDelete.task %>?</p>
      <a href="/">Não</a>
      <a href="/deleteTask/<%= taskDelete._id %>">Sim</a>
    </div>
  </section>
   <% } %>   
      
<script src="bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
</body>

</html>